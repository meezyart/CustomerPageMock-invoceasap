"use strict";angular.module("invoiceASAPApp",["ngAnimate","ngCookies","ngResource","ngSanitize","ngTouch","ui.router"]).config(["$stateProvider",function(a){a.state("index",{url:"/:customerguid",views:{"content@":{templateUrl:"html/views/customers.html",controller:"CustomerController"},"customerRecords@index":{templateUrl:"html/partial/customer-records.html",controller:"CustomerController"},"customerStats@index":{templateUrl:"html/partial/customer-stats.html",controller:"CustomerController"}}})}]).run(["$q","$timeout","$state","$anchorScroll","$location","$stateParams","$rootScope","CustomerService",function(a,b,c,d,e,f,g,h){function i(){console.log("INFO: Launching Customer section"),d()}function j(){var b=[h.loadCustomers()];a.all(b).then(function(a){console.log("INFO: resolved dependencies... "),-1==a.indexOf(void 0)?i():k()},function(a){k()})}function k(){console.log("Sorry, there was an error on startup. Are you connected to the internet?")}j(),g.$on("$stateChangeStart",function(a,b,c,d,e){}),g.$on("$stateChangeSuccess",function(a,b,c,d,e){})}]),angular.module("invoiceASAPApp").controller("ShellController",["$state","$rootScope","$scope",function(a,b,c){}]),angular.module("invoiceASAPApp").controller("CustomerController",["$state","$rootScope","$stateParams","$scope","CustomerService","$q",function(a,b,c,d,e,f){function g(a){var b=[d.customer=e.getCustomer(a),e.loadCustomerStats(a),e.loadCustomerNotes(a),e.loadCustomerDocumentStats(a)];f.all(b).then(function(a){d.stats=e.getCustomerStats(),d.notes=e.getCustomerNotes(),d.docStats=e.getCustomerDocumentStats()},function(a){console.log("INFO: error ")})}d.customerguid=c.customerguid?c.customerguid:"eb627abe-2735-11e4-ae4f-025ae7f06885",d.$on("$viewContentLoaded",function(a){g(d.customerguid)})}]),angular.module("invoiceASAPApp").factory("CustomerService",["$filter","$http","$q",function(a,b,c){var d,e,f,g,h,i="data/GetCustomers.json",j="data/GetCustomerStats.json",k="data/GetCustomerNotes.json",l="data/GetCustomerDocumentStats.json";return{init:function(){},loadCustomers:function(){return b({method:"GET",url:i}).then(function(a){return d=a.data.customers})},loadCustomerStats:function(a){return b({method:"GET",url:j}).success(function(a){e=a.customer_stats}).error(function(a,b){console.log("Customer loading error: "+b);var c="Sorry, an error occurred.";return{message:c}})},getCustomerStats:function(){return e},loadCustomerNotes:function(a){return b({method:"GET",url:k}).success(function(a,b,c,d){f=a.customer_notes,console.dir("customerNotes : "+f[0].id)}).error(function(a,b,c,d){console.log("Customer loading error: "+b);var e="Sorry, an error occurred.";return{message:e}})},getCustomerNotes:function(){return f},loadCustomerDocumentStats:function(a){return b({method:"GET",url:l}).success(function(a,b,c,d){h=a.customer_document_stats,console.dir("sum_payments : "+h.sum_payments)}).error(function(a,b,c,d){console.log("Customer loading error: "+b);var e="Sorry, an error occurred.";return{message:e}})},getCustomerDocumentStats:function(){return h},setCustomerGuid:function(a){g=a},getCurrentCustomerGuid:function(){return g},getCustomer:function(b){var c=null;try{c=a("filter")(d,{guid:b})[0]}catch(e){console.log("ERROR: Guid is not Present: "+b)}return c}}}]),angular.module("invoiceASAPApp").directive("spinner",["$rootScope","$state",function(a,b){var c={lines:10,length:10,width:3,radius:5,corners:1,rotate:0,direction:1,color:"#333",speed:.8,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"30%",left:"50%"};return{restrict:"E",replace:!0,template:'<div class="spinner-container"></div>',link:function(a,b){var d=b[0];a.spinner=new Spinner(c).spin(d)}}}]),angular.module("invoiceASAPApp").directive("tabs",function(){return{restrict:"E",transclude:!0,scope:{},controller:["$scope",function(a){var b=a.panes=[];a.select=function(a){angular.forEach(b,function(a){a.selected=!1}),a.selected=!0},this.addPane=function(c){0==b.length&&a.select(c),b.push(c)}}],template:'<div class="tabbable"><div class="section-heading"> <ul class="nav nav-tabs"><li ng-repeat="pane in panes" ng-class="{active:pane.selected}"><a href="" ng-click="select(pane)">{{pane.title}}</a></li></ul></div><div class="panel-content" ng-transclude></div></div>',replace:!0}}).directive("pane",function(){return{require:"^tabs",restrict:"E",transclude:!0,scope:{title:"@"},link:function(a,b,c,d){d.addPane(a)},template:'<div class="tab-pane" ng-class="{active: selected}" ng-transclude></div>',replace:!0}}),angular.module("invoiceASAPApp").filter("tel",function(){return function(a){if(!a)return"";var b=a.toString().trim().replace(/^\+/,"");if(b.match(/[^0-9]/))return a;var c,d,e;switch(b.length){case 10:c=1,d=b.slice(0,3),e=b.slice(3);break;case 11:c=b[0],d=b.slice(1,4),e=b.slice(4);break;case 12:c=b.slice(0,3),d=b.slice(3,5),e=b.slice(5);break;default:return a}return 1==c&&(c=""),e=e.slice(0,3)+"-"+e.slice(3),(c+" ("+d+") "+e).trim()}});